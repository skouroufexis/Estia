{"ast":null,"code":"import _slicedToArray from\"/Users/stavros/Documents/web/estia/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'./notifications.css';import{useState,useEffect}from'react';import React from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Notifications(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),all_Notifications=_useState2[0],getAll_Notifications=_useState2[1];var household=localStorage.getItem('household');useEffect(function(){getNotifications();},[]);function getNotifications(){getAll_Notifications('');var path='http://localhost:8080/api/getNotifications?household='+household;var xhttp=new XMLHttpRequest();xhttp.open(\"GET\",path);xhttp.send();xhttp.onload=function(){if(this.status==200){var response=JSON.parse(this.responseText);getAll_Notifications(response);}};}function shoppingList(category,subcategory,item){// household,category,subcategory,item\nvar path='http://localhost:8080/api/postShoppinglist';var data=\"household=\".concat(household,\"&category=\").concat(category,\"&subcategory=\").concat(subcategory,\"&item=\").concat(item);var xhttp=new XMLHttpRequest();xhttp.open(\"POST\",path);xhttp.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\");xhttp.send(data);xhttp.onload=function(){if(this.status==200){getNotifications();}};}function removeExpiry(item,dateAdded){var path='http://localhost:8080/api/deleteExpiry';var data=\"household=\".concat(household,\"&item=\").concat(item,\"&date=\").concat(dateAdded);var xhttp=new XMLHttpRequest();xhttp.open(\"POST\",path);xhttp.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\");xhttp.send(data);xhttp.onload=function(){if(this.status==200){getNotifications();}};}//gets items from file and creates list of products         \nfunction getItems(all_Notifications){if(all_Notifications!=''){var itemsList=[];var l=all_Notifications.length;var c;var _loop=function _loop(){var notifications=all_Notifications[c].split(',');var item=notifications[0];var message=notifications[1];var category=notifications[2];var subcategory=notifications[3];var autolist=notifications[4];var added=notifications[5];//populate list array to displayed--different colours for the two different notification messages\nif(message=='Stock below minimum'){itemsList.push(/*#__PURE__*/_jsxs(\"div\",{className:\"row top1 record\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"col-5 margin-v-auto left vertical-centre\",children:/*#__PURE__*/_jsx(\"span\",{className:\"left2\",children:item})}),/*#__PURE__*/_jsx(\"p\",{className:\"col-5 margin-v-auto left vertical-centre green2\",children:message}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-2 background-white\",children:[autolist=='on'&&message=='Stock below minimum'&&/*#__PURE__*/_jsx(\"button\",{className:\"left2\",children:/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-tasks grey\"})}),autolist=='off'&&message=='Stock below minimum'&&added=='false'&&/*#__PURE__*/_jsxs(\"button\",{className:\"left2 btn green\",title:\"add to shopping list\",onClick:function onClick(){shoppingList(category,subcategory,item);},children:[\"+ \",/*#__PURE__*/_jsx(\"i\",{class:\"far fa-list-alt\"})]}),autolist=='off'&&message=='Stock below minimum'&&added=='true'&&/*#__PURE__*/_jsx(\"button\",{className:\"left2\",children:/*#__PURE__*/_jsx(\"i\",{class:\"left2 fas fa-tasks grey\"})})]})]},c));}else{itemsList.push(/*#__PURE__*/_jsxs(\"div\",{className:\"row top1 record\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"col-5 margin-v-auto left vertical-centre\",children:/*#__PURE__*/_jsx(\"span\",{className:\"left2\",children:item})}),/*#__PURE__*/_jsx(\"p\",{className:\"col-5 margin-v-auto left vertical-centre red\",children:message}),/*#__PURE__*/_jsx(\"div\",{className:\"col-2 background-white\",children:/*#__PURE__*/_jsx(\"button\",{className:\"left2 btn green\",title:\"send to trash\",onClick:function onClick(){removeExpiry(item,added);},children:/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-trash\"})})})]},c));}};for(c=0;c<l;c++){_loop();}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row top2 headers sticky-top\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"col-5 left\",children:\"Item\"}),/*#__PURE__*/_jsx(\"h6\",{className:\"col-5 left\",children:\"Message\"}),/*#__PURE__*/_jsx(\"h6\",{className:\"col-2 left\"})]}),itemsList]});}else{return/*#__PURE__*/_jsx(\"div\",{className:\"row top1\",children:/*#__PURE__*/_jsx(\"p\",{className:\"col margin-v-auto  left lightgrey\",children:\"No Notifications found\"})});}}return/*#__PURE__*/_jsxs(\"main\",{className:\"container top1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row left\",children:/*#__PURE__*/_jsx(\"h5\",{className:\"col left\",children:\"Notifications\"})}),/*#__PURE__*/_jsx(\"div\",{id:\"main-container_Transactions\",children:getItems(all_Notifications)}),all_Notifications!=''&&/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col lightgrey\",children:/*#__PURE__*/_jsx(\"small\",{className:\"left1\",children:\"scroll down to see more notifications\"})})})]});}export default Notifications;","map":{"version":3,"sources":["/Users/stavros/Documents/web/estia/src/Notifications.js"],"names":["useState","useEffect","React","Notifications","all_Notifications","getAll_Notifications","household","localStorage","getItem","getNotifications","path","xhttp","XMLHttpRequest","open","send","onload","status","response","JSON","parse","responseText","shoppingList","category","subcategory","item","data","setRequestHeader","removeExpiry","dateAdded","getItems","itemsList","l","length","c","notifications","split","message","autolist","added","push"],"mappings":"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","sourcesContent":["\nimport './notifications.css';\nimport  { useState,useEffect } from 'react';\n\nimport React from \"react\";\n\nfunction Notifications() {\n  const [all_Notifications, getAll_Notifications] = useState('');\n  \n  let household=localStorage.getItem('household');\n\n  useEffect(()=>{    \n    getNotifications();        \n  },[]);\n\n  function getNotifications(){    \n      getAll_Notifications('');\n      let path='http://localhost:8080/api/getNotifications?household='+household;\n      var xhttp = new XMLHttpRequest();    \n      xhttp.open(\"GET\", path);\n      xhttp.send();\n      xhttp.onload = function() {  \n         if(this.status==200){\n            let response=JSON.parse(this.responseText);\n            getAll_Notifications(response);            \n         }\n        \n      };   \n  }\n\n  function shoppingList(category,subcategory,item){\n\n    \n    // household,category,subcategory,item\n    let path='http://localhost:8080/api/postShoppinglist';\n\n    let data=`household=${household}&category=${category}&subcategory=${subcategory}&item=${item}`;\n\n    var xhttp = new XMLHttpRequest();    \n    xhttp.open(\"POST\", path);\n    xhttp.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n    xhttp.send(data);\n    xhttp.onload = function() {  \n        if(this.status==200){          \n          getNotifications();          \n        }\n      \n    };  \n  }\n\n\n  function removeExpiry(item,dateAdded){\n     \n     let path='http://localhost:8080/api/deleteExpiry';\n\n     let data=`household=${household}&item=${item}&date=${dateAdded}`;\n \n     var xhttp = new XMLHttpRequest();    \n     xhttp.open(\"POST\", path);\n     xhttp.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n     xhttp.send(data);\n     xhttp.onload = function() {  \n         if(this.status==200){          \n           getNotifications();          \n         }       \n     };      \n  }\n\n  \n  //gets items from file and creates list of products         \n  function getItems(all_Notifications){\n    if(all_Notifications!='')\n    {  \n      let itemsList=[];\n      \n      let l=all_Notifications.length;\n      \n      let c;\n\n      for(c=0;c<l;c++){\n      \n      \n        let  notifications= all_Notifications[c].split(',');\n          \n          \n          let item=notifications[0];\n          let message=notifications[1];\n          let category=notifications[2];\n          let subcategory=notifications[3];\n          let autolist=notifications[4];\n          let added=notifications[5];\n          \n          //populate list array to displayed--different colours for the two different notification messages\n          if(message=='Stock below minimum'){\n\n            itemsList.push( \n              <div className='row top1 record' key={c}>         \n                <p className='col-5 margin-v-auto left vertical-centre'><span className='left2'>{item}</span></p>\n                <p className='col-5 margin-v-auto left vertical-centre green2'>{message}</p>              \n                <div className='col-2 background-white'>     \n\n                  {(autolist=='on' && message=='Stock below minimum') && <button className='left2'><i class=\"fas fa-tasks grey\"></i></button>}             \n                  {(autolist=='off' && message=='Stock below minimum' && added=='false') && <button className='left2 btn green' title='add to shopping list' onClick={()=>{shoppingList(category,subcategory,item);}}>+ <i class=\"far fa-list-alt\"></i></button>} \n                  {(autolist=='off' && message=='Stock below minimum' && added=='true') && <button className='left2'><i class=\"left2 fas fa-tasks grey\"></i></button>}\n                  \n                  \n                </div>\n            </div> ) \n            \n          }\n          else{\n            itemsList.push( \n              <div className='row top1 record' key={c}>     \n                <p className='col-5 margin-v-auto left vertical-centre'><span className='left2'>{item}</span></p>\n                <p className='col-5 margin-v-auto left vertical-centre red'>{message}</p>                  \n\n                <div className='col-2 background-white'>                       \n                  <button className='left2 btn green' title='send to trash' onClick={()=>{removeExpiry(item,added);}}><i class=\"fas fa-trash\"></i></button> \n                </div>\n\n            </div> ) \n\n          }\n          \n          \n          \n          \n        \n          \n      }\n      \n\n      return(\n        <div>\n          <div className='row top2 headers sticky-top'>\n              <h6 className='col-5 left'>Item</h6>\n              <h6 className='col-5 left'>Message</h6>\n              <h6 className='col-2 left'></h6>                               \n          </div>\n          {itemsList}\n        </div>\n      );\n    }else{\n      return(\n          <div className='row top1'>         \n              <p className='col margin-v-auto  left lightgrey'>No Notifications found</p>              \n          </div>\n      )\n    }\n    \n  }\n\n  return (\n    \n      \n      <main className='container top1'>\n          <div className='row left'>\n              <h5 className='col left'>Notifications</h5>\n          </div>         \n          <div id='main-container_Transactions'>\n            {getItems(all_Notifications)}            \n          </div>\n\n          { all_Notifications!='' &&\n            <div className='row'>\n              <div className='col lightgrey'><small className='left1'>scroll down to see more notifications</small></div>\n            </div>\n          }\n      </main>    \n  );\n}\n\nexport default Notifications;\n"]},"metadata":{},"sourceType":"module"}