{"ast":null,"code":"import _createForOfIteratorHelper from\"/Users/stavros/Documents/web/estia/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _slicedToArray from\"/Users/stavros/Documents/web/estia/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from'react';import React from\"react\";import{BrowserRouter as Router,Link,useParams}from\"react-router-dom\";import'./Stock.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function StockCategory(props){var _useParams=useParams(),category=_useParams.category;var _useParams2=useParams(),subcategory=_useParams2.subcategory;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),all_StockCategory=_useState2[0],setAll_StockCategory=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),startIndex=_useState4[0],setStartIndex=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),content=_useState6[0],setContent=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),selectedItem=_useState8[0],selectItem=_useState8[1];var household=localStorage.getItem('household');useEffect(function(){///determine folder & file path based on url parameter\nsubcategory=getSubcategory(category,subcategory);getContent(category,subcategory);},[]);function getContent(category,subcategory){var household=localStorage.getItem('household');var xhttp=new XMLHttpRequest();var path='http://localhost:8080/api/getItems/?household='+household+'&category='+category+'&subcategory='+subcategory;xhttp.open(\"GET\",path);xhttp.send();xhttp.onload=function(){if(this.status==200){var response=JSON.parse(this.responseText);response=response.sort();setAll_StockCategory(response);showContent();}else{var _response=this.responseText;console.log(_response);}};}function getSubcategory(category,subcategory){if(category==0){if(subcategory=='Fruit - Vegetables'){return 1;}else if(subcategory=='Meat - Fish'){return 2;}else if(subcategory=='Bakery'){return 3;}else if(subcategory=='Milk - Dairy'){return 4;}else if(subcategory=='Salumi'){return 5;}else if(subcategory=='Dry Food'){return 6;}else if(subcategory=='Beverages'){return 7;}else if(subcategory=='Salt - Spices'){return 8;}else if(subcategory=='Glucose'){return 9;}else if(subcategory=='Coffee - Tea'){return 10;}else if(subcategory=='Snacks'){return 11;}else if(subcategory=='Other'){return 12;}}//household\nelse{if(subcategory=='Cleaning'){return 1;}else if(subcategory=='Hugiene'){return 2;}else if(subcategory=='Plastics'){return 3;}else if(subcategory=='Paper'){return 4;}else if(subcategory=='Cosmetics'){return 5;}else if(subcategory=='Other'){return 6;}}}function showContent(){var items=[];if(all_StockCategory!=''){var c;var endIndex;var indexDifference=all_StockCategory.length-startIndex;if(indexDifference>=3){endIndex=startIndex+3;}else{endIndex=startIndex+indexDifference;}var _loop=function _loop(){var item=all_StockCategory[c];item=item.split(',');item=item[0];//item name                \nitems.push(/*#__PURE__*/_jsxs(\"div\",{className:\"row top2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-8  record record_StockCategory vertical-centre\",children:item}),/*#__PURE__*/_jsx(Link,{className:\"link col-1  left1\",to:'/item-balance/'+category+'/'+subcategory+'/'+item,children:/*#__PURE__*/_jsx(\"button\",{className:\"left1 centre btn button-secondary\",children:\"+/-\"})}),/*#__PURE__*/_jsx(Link,{className:\"link col-1  left1\",to:'/item-settings/'+category+'/'+subcategory+'/'+item,children:/*#__PURE__*/_jsx(\"button\",{className:\"col centre btn button-secondary\",children:/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-cog\"})})}),/*#__PURE__*/_jsx(Link,{className:\"link col-1  left1\",children:/*#__PURE__*/_jsx(\"button\",{className:\"centre btn button-secondary\",onClick:function onClick(){openConfirm(item);},children:/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-trash-alt\"})})})]}));};for(c=startIndex;c<endIndex;c++){_loop();}}else{items.push(/*#__PURE__*/_jsx(\"div\",{className:\"row top2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col  centre\",children:[/*#__PURE__*/_jsx(\"small\",{className:\"lightgrey\",children:\"No items\"}),\" \"]})}));}return/*#__PURE__*/_jsx(\"div\",{children:items});}function scrollButtons(){if(all_StockCategory!=''){return/*#__PURE__*/_jsxs(\"div\",{className:\"row top1 maincontent\",id:\"navigationContainer_StockCategory\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"col-4\",onClick:function onClick(){return scrollUp();},children:/*#__PURE__*/_jsx(\"i\",{class:\"navigateCategory col fas fa-caret-up\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"col-4\",onClick:function onClick(){return scrollDown();},children:/*#__PURE__*/_jsx(\"i\",{class:\"navigateCategory fas fa-caret-down\"})})]});}}function scrollUp(){if(startIndex>3){setStartIndex(startIndex-3);}else{setStartIndex(0);}}function scrollDown(){var indexDifference=all_StockCategory.length-startIndex;if(indexDifference>3){setStartIndex(startIndex+3);}}function openConfirm(item){selectItem(item);var modal=document.getElementsByClassName('modals2');modal=modal[0];modal.style.display='block';setTimeout(function(){modal.style.transform='translateY(0)';modal.style.opacity='1';var maincontent=document.getElementsByClassName('maincontent');var m;var _iterator=_createForOfIteratorHelper(maincontent),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){m=_step.value;m.style.opacity='0.2';}}catch(err){_iterator.e(err);}finally{_iterator.f();}},100);}function closeModal(){var maincontent=document.getElementsByClassName('maincontent');var modal=document.getElementsByClassName('modals2');modal=modal[0];modal.style.transform='translateY(-10px)';modal.style.opacity='0';var m;var _iterator2=_createForOfIteratorHelper(maincontent),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){m=_step2.value;m.style.opacity='1';}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}setTimeout(function(){modal.style.display='none';},100);}function confirmDelete(response){closeModal();//handle response\nvar item=selectedItem;if(response==true){// send request to delete item\nvar xhttp=new XMLHttpRequest();xhttp.open(\"POST\",\"http://localhost:8080/api/deleteItem\");xhttp.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\");var data=\"household=\".concat(household,\"&category=\").concat(category,\"&subcategory=\").concat(subcategory,\"&item=\").concat(item);xhttp.send(data);xhttp.onload=function(){if(this.status==200){console.log('aaaaa');var origin='stock';var message='Item successfully deleted';var path='http://localhost:3000/error/'+origin+'/'+message;window.location.replace(path);}};}}return/*#__PURE__*/_jsxs(\"main\",{className:\"container top1\",id:\"main\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"modals2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row top2 modals-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 centre top2\",children:/*#__PURE__*/_jsx(\"b\",{children:/*#__PURE__*/_jsx(\"p\",{children:\"Are you sure you want to delete this item?\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 centre\",children:[\" \",/*#__PURE__*/_jsx(\"button\",{className:\"col-2 btn button-secondary\",onClick:function onClick(){confirmDelete(true);},children:\"Yes\"}),\" \",/*#__PURE__*/_jsx(\"button\",{className:\"col-2  btn button-secondary2\",onClick:function onClick(){confirmDelete(false);},children:\"Cancel\"}),\" \"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row maincontent\",children:/*#__PURE__*/_jsx(Link,{to:\"/stock\",className:\"col-12\",children:/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-caret-left\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row top1 maincontent\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-6 green vertical-centre\",children:/*#__PURE__*/_jsxs(\"b\",{children:[subcategory,\" \"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-6 maincontent\",children:/*#__PURE__*/_jsx(Link,{to:'/new-item/'+category+'/'+subcategory,children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",children:/*#__PURE__*/_jsx(\"b\",{children:\" + New item\"})})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row top1 maincontent\",id:\"contentContainer_StockCategory\",children:showContent()}),scrollButtons()]});}export default StockCategory;","map":{"version":3,"sources":["/Users/stavros/Documents/web/estia/src/StockCategory.js"],"names":["useState","useEffect","React","BrowserRouter","Router","Link","useParams","StockCategory","props","category","subcategory","all_StockCategory","setAll_StockCategory","startIndex","setStartIndex","content","setContent","selectedItem","selectItem","household","localStorage","getItem","getSubcategory","getContent","xhttp","XMLHttpRequest","path","open","send","onload","status","response","JSON","parse","responseText","sort","showContent","console","log","items","c","endIndex","indexDifference","length","item","split","push","openConfirm","scrollButtons","scrollUp","scrollDown","modal","document","getElementsByClassName","style","display","setTimeout","transform","opacity","maincontent","m","closeModal","confirmDelete","setRequestHeader","data","origin","message","window","location","replace"],"mappings":"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","sourcesContent":["import  { useState,useEffect } from 'react';\nimport React from \"react\";\nimport {BrowserRouter as Router,Link,useParams} from \"react-router-dom\";\n\n  \nimport './Stock.css';\n\nfunction StockCategory(props) {\n    \n    \n    let { category } = useParams();\n    let { subcategory } = useParams();\n\n    const [all_StockCategory, setAll_StockCategory] = useState('');\n    const[startIndex, setStartIndex]=useState(0);    \n    const [content,setContent]=useState('');\n    const [selectedItem,selectItem]=useState('');\n\n    let household=localStorage.getItem('household');\n\n    useEffect(() => {\n        ///determine folder & file path based on url parameter\n        subcategory=getSubcategory(category,subcategory);        \n        getContent(category,subcategory);                \n     },[]);\n\n    function getContent(category,subcategory){                \n        let household=localStorage.getItem('household');\n        var xhttp = new XMLHttpRequest();\n        let path='http://localhost:8080/api/getItems/?household='+household+'&category='+category+'&subcategory='+subcategory;\n        xhttp.open(\"GET\", path);\n        xhttp.send();\n\n        xhttp.onload = function() {       \n            if(this.status==200){\n                let response=JSON.parse(this.responseText);                \n                response=response.sort();                   \n                setAll_StockCategory(response);                                 \n                showContent();     \n \n            }  \n\n            else{\n                let response=this.responseText;\n                console.log(response);\n            }            \n        };\n    }\n    \n    function getSubcategory(category,subcategory){                \n        if(category==0){\n          if(subcategory=='Fruit - Vegetables'){\n            return 1;\n          }\n          else if (subcategory=='Meat - Fish'){\n            return 2;\n          }\n          else if (subcategory=='Bakery'){\n            return 3;\n          }\n          else if (subcategory=='Milk - Dairy'){\n            return 4;\n          }\n          else if (subcategory=='Salumi'){\n            return 5;\n          }\n          else if (subcategory=='Dry Food'){\n            return 6;\n          }\n          else if (subcategory=='Beverages'){\n            return 7;\n          }\n          else if (subcategory=='Salt - Spices'){\n            return 8;\n          }\n          else if (subcategory=='Glucose'){\n            return 9;\n          } \n          else if (subcategory=='Coffee - Tea'){\n            return 10;\n          }\n          else if (subcategory=='Snacks'){\n            return 11;\n          }\n          else if (subcategory=='Other'){\n            return 12;\n          }\n      \n        }\n      \n        //household\n        else{\n          if(subcategory=='Cleaning'){\n            return 1;\n          }\n          else if (subcategory=='Hugiene'){\n            return 2;\n          }\n          else if (subcategory=='Plastics'){\n            return 3;\n          }\n          else if (subcategory=='Paper'){\n            return 4;\n          }\n          else if (subcategory=='Cosmetics'){\n            return 5;\n          }\n          else if (subcategory=='Other'){\n            return 6;\n          }\n          \n        }\n    }\n\n    function showContent(){\n      \n        let items=[];     \n\n        if(all_StockCategory!=''){       \n          \n          \n          let c; \n          let endIndex;\n          let indexDifference=all_StockCategory.length-startIndex;\n\n          if((indexDifference)>=3){\n            endIndex=startIndex+3;\n          }\n          else{\n            endIndex=startIndex+indexDifference;\n          }\n                              \n          for(c=startIndex;c<endIndex;c++){            \n            let item=all_StockCategory[c];              \n                item=item.split(',');\n                item=item[0]; //item name                \n                items.push(\n                  \n                        <div className='row top2' >\n                            <div className='col-8  record record_StockCategory vertical-centre'>\n                              {item}\n                            </div>\n        \n                            <Link className='link col-1  left1' to={'/item-balance/'+category+'/'+subcategory+'/'+item} ><button className='left1 centre btn button-secondary'>+/-</button></Link>\n                            <Link className='link col-1  left1' to={'/item-settings/'+category+'/'+subcategory+'/'+item}><button className='col centre btn button-secondary'><i class=\"fas fa-cog\"></i></button></Link>\n                            <Link className='link col-1  left1'><button className='centre btn button-secondary' onClick={()=>{openConfirm(item);}}><i class=\"fas fa-trash-alt\"></i></button></Link>\n                        </div>                                       \n              );\n            }            \n        }\n\n        else{\n\n\n          items.push(\n            <div className='row top2'>\n                <div className='col  centre'><small className='lightgrey'>No items</small> </div>\n            </div>\n          )\n\n          \n          \n        }\n        return(<div>{items}</div>)\n    }\n\n\n    function scrollButtons(){\n      if(all_StockCategory!=''){\n        return(\n          <div className='row top1 maincontent' id='navigationContainer_StockCategory'>              \n              <button className='col-4' onClick={()=>scrollUp()}><i class=\"navigateCategory col fas fa-caret-up\"></i></button>\n              <button className='col-4' onClick={()=>scrollDown()}><i class=\"navigateCategory fas fa-caret-down\"></i></button>                              \n          </div>  \n        )\n      }\n    }\n\n    function scrollUp(){\n      \n      if((startIndex)>3){\n        setStartIndex(startIndex-3);\n      }\n      else {\n        setStartIndex(0);\n      }\n    }\n\n    function scrollDown(){      \n      let indexDifference=all_StockCategory.length-startIndex;\n      if((indexDifference)>3){\n        setStartIndex(startIndex+3);\n      }\n    }\n\n    function openConfirm(item){\n      selectItem(item);\n      let modal=document.getElementsByClassName('modals2');\n      modal=modal[0];\n\n      modal.style.display='block';\n      setTimeout(() => {\n        modal.style.transform='translateY(0)';\n        modal.style.opacity='1';\n\n        let maincontent=document.getElementsByClassName('maincontent');\n        let m;\n        for(m of maincontent){\n          m.style.opacity='0.2';          \n        }        \n      }, 100);\n    }\n\n    function closeModal(){\n      let maincontent=document.getElementsByClassName('maincontent');\n      let modal=document.getElementsByClassName('modals2');\n      modal=modal[0];\n\n      modal.style.transform='translateY(-10px)';\n      modal.style.opacity='0';\n\n      let m;\n        for(m of maincontent){\n          m.style.opacity='1';          \n        }        \n\n      setTimeout(() => {       \n        modal.style.display='none';        \n      }, 100);\n    }\n\n\n    function confirmDelete(response){\n      \n      closeModal();\n      //handle response\n      let item=selectedItem;\n      if(response==true){        \n        // send request to delete item\n        var xhttp = new XMLHttpRequest();\n    \n        xhttp.open(\"POST\", \"http://localhost:8080/api/deleteItem\");\n        xhttp.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n        let data=`household=${household}&category=${category}&subcategory=${subcategory}&item=${item}`;\n        \n        xhttp.send(data);\n        xhttp.onload = function() {\n          if(this.status==200){\n            console.log('aaaaa');\n            let origin='stock';\n            let message='Item successfully deleted';\n            let path='http://localhost:3000/error/'+origin+'/'+message;\n            window.location.replace(path);\n          }\n          \n        };\n      }\n      \n    }\n\n    return (        \n      <main className='container top1' id='main'>\n          \n        <div className='modals2'>\n\n          <div className='row top2 modals-content'>\n              <div className='col-12 centre top2'><b><p>Are you sure you want to delete this item?</p></b></div>\n              <div className='col-12 centre'> <button className='col-2 btn button-secondary' onClick={()=>{confirmDelete(true)}}>Yes</button> <button className='col-2  btn button-secondary2' onClick={()=>{confirmDelete(false)}}>Cancel</button> </div>            \n          </div>\n\n        </div>\n\n\n        <div className='row maincontent'>\n            <Link to='/stock' className='col-12'><i class=\"fas fa-caret-left\"></i></Link>\n        </div>\n\n        <div className='row top1 maincontent'>\n          <div className='col-6 green vertical-centre'>\n              <b>{subcategory} </b>\n          </div>\n\n          <div className='col-6 maincontent'>\n              <Link to={'/new-item/'+category+'/'+subcategory}><button className='btn btn-primary'><b> + New item</b></button></Link>\n              \n          </div>\n\n        </div>\n\n        < div className='row top1 maincontent' id='contentContainer_StockCategory'>\n        {showContent()}\n        </div>\n\n        {scrollButtons()}\n          \n          \n          \n      </main>            \n    );\n  }\n\n  \n  \n  export default StockCategory;\n  "]},"metadata":{},"sourceType":"module"}