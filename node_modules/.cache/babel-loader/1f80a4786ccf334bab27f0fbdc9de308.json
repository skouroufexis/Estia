{"ast":null,"code":"import _slicedToArray from\"/Users/stavros/Documents/web/estia/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";// import './main.css';\nimport{useState,useEffect}from'react';import React from\"react\";import'./itemSettings.css';import{BrowserRouter as Router,Link,useParams}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ItemSettings(){var _useParams=useParams(),category=_useParams.category,subcategory=_useParams.subcategory,item=_useParams.item;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),newItemName=_useState2[0],setNewItemName=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),index=_useState4[0],setIndex=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),minimum=_useState6[0],setMinimum=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),total=_useState8[0],setTotal=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),duration=_useState10[0],setDuration=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),notifications=_useState12[0],setNotifications=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),autolist=_useState14[0],setAutolist=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),favourites=_useState16[0],setFavourites=_useState16[1];var household=localStorage.getItem('household');var deleted='false';function setNewItemNamef(){var input=document.getElementById('item');setNewItemName(input.value.trim());}function setIndexf(n){if(index+n<=6&&index+n>0){setIndex(index+n);}}function setMinimumf(n){if(minimum+n>=0){setMinimum(minimum+n);}}function setDurationf(n){if(n=='No expiration'){setDuration(n);}else{if(duration=='No expiration'){if(n>0){setDuration(n);}}else{if(duration+n>=0){setDuration(duration+n);}}}}function submitForm(){var data=\"household=\".concat(household,\"&category=\").concat(category,\"&subcategory=\").concat(subcategory,\"&item=\").concat(item,\"&newitem=\").concat(newItemName,\"&total=\").concat(total,\"&minimum=\").concat(minimum,\"&duration=\").concat(duration,\"&deleted=\").concat(deleted,\"&notifications=\").concat(notifications,\"&autolist=\").concat(autolist,\"&favourites=\").concat(favourites);var request=new XMLHttpRequest();request.open('POST','http://localhost:8080/api/putItem');request.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\");request.send(data);request.onload=function(){if(this.status==200){var origin='stock';var message='Item settings successfully modified';var path='http://localhost:3000/error/'+origin+'/'+message;window.location.replace(path);}};}function setNotificationsf(){if(notifications=='on'){setNotifications('off');}else{setNotifications('on');}}function setAutolistf(){if(autolist=='on'){setAutolist('off');}else{setAutolist('on');}}function setFavouritesf(){if(favourites=='on'){setFavourites('off');}else{setFavourites('on');}}useEffect(function(){var household=localStorage.getItem('household');setNewItemName(item);//get item information\nvar path='http://localhost:8080/api/getSingleItem?household='+household+'&category='+category+'&subcategory='+subcategory+'&item='+item;var xhttp=new XMLHttpRequest();xhttp.open(\"GET\",path);xhttp.send();xhttp.onload=function(){if(this.status==200){var response=JSON.parse(this.responseText);var fields=response[0].split(',');//populate constant with saved values\nsetMinimum(parseInt(fields[2]));setTotal(parseInt(fields[1]));if(fields[3]=='No expiration'){setDuration(fields[3]);}else{setDuration(parseInt(fields[3]));}setNewItemName(fields[0]);setNotifications(fields[5]);setAutolist(fields[6]);setFavourites(fields[7]);}};},[]);return/*#__PURE__*/_jsxs(\"main\",{className:\"container top1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(Link,{to:'/stock-category/'+category+'/'+subcategory,className:\"col-12\",children:/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-caret-left\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"row top1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 green\",children:[/*#__PURE__*/_jsxs(\"b\",{children:[\" \",item,\" \"]}),/*#__PURE__*/_jsx(\"span\",{className:\"lightgrey\",children:\" |settings\"})]})}),/*#__PURE__*/_jsxs(\"form\",{className:\"row\",id:\"form_ItemSettings\",children:[index==1&&/*#__PURE__*/_jsxs(\"label\",{className:\"col-12 top1 grey\",children:[\"Item Name\",/*#__PURE__*/_jsx(\"input\",{className:\"col-12\",name:\"item\",id:\"item\",value:newItemName,onChange:function onChange(){setNewItemNamef();}})]}),index==2&&/*#__PURE__*/_jsxs(\"label\",{className:\"col-12 top1 grey \",children:[\"Minimum quantity allowed\",/*#__PURE__*/_jsx(\"div\",{className:\"col-12 top1 \",id:\"minimum\",children:/*#__PURE__*/_jsx(\"b\",{children:minimum})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"hidden\",name:\"minimum\",value:minimum}),/*#__PURE__*/_jsxs(\"div\",{className:\"top1\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn  button-secondary2\",onClick:function onClick(){setMinimumf(-5);},children:\"-5\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn  button-secondary2 left1\",onClick:function onClick(){setMinimumf(-1);},children:\"-1\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn  button-secondary left1\",onClick:function onClick(){setMinimumf(1);},children:\"+1\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn  button-secondary left1\",onClick:function onClick(){setMinimumf(5);},children:\"+5\"})]})]}),index==3&&/*#__PURE__*/_jsxs(\"label\",{className:\"col-12 top1 grey\",children:[\"Duration (days)\",/*#__PURE__*/_jsx(\"div\",{className:\"col-12 field_ItemNew top1\",id:\"duration\",children:/*#__PURE__*/_jsx(\"b\",{children:duration})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"hidden\",name:\"duration\",value:duration}),/*#__PURE__*/_jsxs(\"div\",{className:\"top1\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn  button-secondary2\",onClick:function onClick(){setDurationf(-5);},children:\"-5\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn  button-secondary2 left1\",onClick:function onClick(){setDurationf(-1);},children:\"-1\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn  button-secondary left1\",onClick:function onClick(){setDurationf(1);},children:\"+1\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn  button-secondary left1\",onClick:function onClick(){setDurationf(5);},children:\"+5\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn  button-secondary left1\",onClick:function onClick(){setDurationf('No expiration');},children:/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-infinity\"})})]})]}),index==4&&notifications=='on'&&/*#__PURE__*/_jsxs(\"label\",{className:\"col-12 grey top1\",children:[\"Notifications  \",notifications,/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"hidden\",name:\"notifications\",value:notifications}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 top1\",id:\"notifications\",children:/*#__PURE__*/_jsx(\"b\",{children:notifications})}),/*#__PURE__*/_jsx(\"div\",{class:\"form-check form-switch\",children:/*#__PURE__*/_jsx(\"input\",{class:\"form-check-input\",type:\"checkbox\",id:\"checkbox-notifications\",checked:true,onChange:function onChange(){setNotificationsf();}})})]}),index==4&&notifications=='off'&&/*#__PURE__*/_jsxs(\"label\",{className:\"col-12 grey top1\",children:[\"Notifications  \",notifications,/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"hidden\",name:\"notifications\",value:notifications}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 top1\",id:\"notifications\",children:/*#__PURE__*/_jsx(\"b\",{children:notifications})}),/*#__PURE__*/_jsx(\"div\",{class:\"form-check form-switch\",children:/*#__PURE__*/_jsx(\"input\",{class:\"form-check-input\",type:\"checkbox\",id:\"checkbox-notifications\",onChange:function onChange(){setNotificationsf();}})})]}),index==5&&autolist=='on'&&/*#__PURE__*/_jsxs(\"label\",{className:\"col-11 grey top1\",children:[\"Auto add to shopping-list\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"hidden\",name:\"autolist\",value:autolist}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 top1\",id:\"autolist\",children:/*#__PURE__*/_jsx(\"b\",{children:autolist})}),/*#__PURE__*/_jsx(\"div\",{class:\"form-check form-switch\",children:/*#__PURE__*/_jsx(\"input\",{class:\"form-check-input\",type:\"checkbox\",id:\"checkbox-autolist\",checked:true,onChange:function onChange(){setAutolistf();}})})]}),index==5&&autolist=='off'&&/*#__PURE__*/_jsxs(\"label\",{className:\"col-11 grey top1\",children:[\"Auto add to shopping-list\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"hidden\",name:\"autolist\",value:autolist}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 top1\",id:\"autolist\",children:/*#__PURE__*/_jsx(\"b\",{children:autolist})}),/*#__PURE__*/_jsx(\"div\",{class:\"form-check form-switch\",children:/*#__PURE__*/_jsx(\"input\",{class:\"form-check-input\",type:\"checkbox\",id:\"checkbox-autolist\",onChange:function onChange(){setAutolistf();}})})]}),index==6&&favourites=='on'&&/*#__PURE__*/_jsxs(\"label\",{className:\"col-11 grey top1\",children:[\"Add to favourites\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"hidden\",name:\"favourites\",value:favourites}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 top1\",id:\"favourites\",children:/*#__PURE__*/_jsx(\"b\",{children:favourites})}),/*#__PURE__*/_jsx(\"div\",{class:\"form-check form-switch\",children:/*#__PURE__*/_jsx(\"input\",{class:\"form-check-input\",type:\"checkbox\",id:\"checkbox-favourites\",checked:true,onChange:function onChange(){setFavouritesf();}})})]}),index==6&&favourites=='off'&&/*#__PURE__*/_jsxs(\"label\",{className:\"col-11 grey top1\",children:[\"Add to favourites\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"hidden\",name:\"favourites\",value:favourites}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 top1\",id:\"favourites\",children:/*#__PURE__*/_jsx(\"b\",{children:favourites})}),/*#__PURE__*/_jsx(\"div\",{class:\"form-check form-switch\",children:/*#__PURE__*/_jsx(\"input\",{class:\"form-check-input\",type:\"checkbox\",id:\"checkbox-favourites\",onChange:function onChange(){setFavouritesf();}})})]}),newItemName==item&&/*#__PURE__*/_jsx(\"button\",{className:\"left col-1 top1 green fas fa-undo-alt invisible\",type:\"button\"}),newItemName!=item&&index==1&&/*#__PURE__*/_jsx(\"button\",{className:\"left col-1 top1 green fas fa-undo-alt\",type:\"button\",onClick:function onClick(){setNewItemName(item);document.getElementById('item').value=item;}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row top1\",children:[index>1&&/*#__PURE__*/_jsx(\"button\",{className:\"col-1\",onClick:function onClick(){return setIndexf(-1);},children:/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-angle-left\"})}),index==1&&/*#__PURE__*/_jsx(\"button\",{className:\"col-1 invisible\"}),newItemName!=''&&index<6&&/*#__PURE__*/_jsx(\"button\",{className:\"col-1 left2\",onClick:function onClick(){return setIndexf(1);},children:/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-angle-right\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row top2\",children:/*#__PURE__*/_jsx(\"button\",{className:\"col-6 col-lg-2 btn btn-primary\",onClick:function onClick(){submitForm();},children:\"Save\"})})]});}export default ItemSettings;","map":{"version":3,"sources":["/Users/stavros/Documents/web/estia/src/ItemSettings.js"],"names":["useState","useEffect","React","BrowserRouter","Router","Link","useParams","ItemSettings","category","subcategory","item","newItemName","setNewItemName","index","setIndex","minimum","setMinimum","total","setTotal","duration","setDuration","notifications","setNotifications","autolist","setAutolist","favourites","setFavourites","household","localStorage","getItem","deleted","setNewItemNamef","input","document","getElementById","value","trim","setIndexf","n","setMinimumf","setDurationf","submitForm","data","request","XMLHttpRequest","open","setRequestHeader","send","onload","status","origin","message","path","window","location","replace","setNotificationsf","setAutolistf","setFavouritesf","xhttp","response","JSON","parse","responseText","fields","split","parseInt"],"mappings":"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","sourcesContent":["\n// import './main.css';\n\nimport  { useState,useEffect } from 'react';\nimport React from \"react\";\nimport './itemSettings.css';\n\nimport {\n  BrowserRouter as Router,    \n  Link,useParams\n} from \"react-router-dom\";\n\nfunction ItemSettings() {\n\n  let { category,subcategory,item } = useParams();\n    \n  const [newItemName, setNewItemName] = useState('');  \n  const [index,setIndex]=useState(1);\n  const [minimum,setMinimum]=useState(0);\n  const [total,setTotal]=useState(0);\n  const [duration,setDuration]=useState(0);\n  const [notifications,setNotifications]=useState('');\n  const [autolist,setAutolist]=useState('');\n  const [favourites,setFavourites]=useState('');\n  \n\n  \n  let household=localStorage.getItem('household');\n  let deleted='false';\n  \n  function setNewItemNamef(){\n      let input=document.getElementById('item');\n      setNewItemName(input.value.trim());\n      \n  }  \n \n  function setIndexf(n){\n      \n      if ((index+n)<=6 && (index+n)>0){\n        setIndex(index+n)\n      }\n  }\n\n\n  function setMinimumf(n){\n    if((minimum+n)>=0){\n      setMinimum(minimum+n);\n    }\n  }\n\n  function setDurationf(n){\n    if(n=='No expiration'){\n      setDuration(n);\n    }\n    else{\n      if(duration=='No expiration'){\n        if(n>0){\n          setDuration(n);\n        }\n        \n      }\n      else{\n        if((duration+n)>=0){\n          setDuration(duration+n);\n        }\n      }\n    }\n    \n  }\n\n  function submitForm(){\n    \n    let data=`household=${household}&category=${category}&subcategory=${subcategory}&item=${item}&newitem=${newItemName}&total=${total}&minimum=${minimum}&duration=${duration}&deleted=${deleted}&notifications=${notifications}&autolist=${autolist}&favourites=${favourites}`;\n    let request=new XMLHttpRequest();                    \n        request.open('POST','http://localhost:8080/api/putItem');  \n        request.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n        request.send(data);\n\n        request.onload = function (){                    \n            if(this.status==200){\n              let origin='stock';\n              let message='Item settings successfully modified';\n              let path='http://localhost:3000/error/'+origin+'/'+message\n              window.location.replace(path);\n              \n            }\n        }\n\n  }\n\n\n  function setNotificationsf(){\n    if(notifications=='on'){\n      setNotifications('off')\n    }\n    else{\n      setNotifications('on');\n    }\n  }\n\n  function setAutolistf(){\n    if(autolist=='on'){\n      setAutolist('off')\n    }\n    else{\n      setAutolist('on');\n    }\n  }\n\n  function setFavouritesf(){\n    if(favourites=='on'){\n      setFavourites('off')\n    }\n    else{\n      setFavourites('on');\n    }\n  }\n\n  \n\n\n  useEffect(() => {    \n\n   \n    let household=localStorage.getItem('household');    \n    setNewItemName(item);\n    \n    //get item information\n    let path='http://localhost:8080/api/getSingleItem?household='+\n              household+'&category='+category+\n              '&subcategory='+subcategory+'&item='+item;\n    var xhttp = new XMLHttpRequest();\n    \n    xhttp.open(\"GET\", path);\n    xhttp.send();\n\n    xhttp.onload = function() {\n      if(this.status==200){\n        let response=JSON.parse(this.responseText);\n            let fields=response[0].split(',');\n            \n        //populate constant with saved values\n        setMinimum(parseInt(fields[2]));\n        setTotal(parseInt(fields[1]));\n        \n        if(fields[3]=='No expiration'){\n          setDuration(fields[3]);\n        }\n        else{\n          setDuration(parseInt(fields[3]));\n        }\n        setNewItemName(fields[0]);        \n        setNotifications(fields[5]);          \n        setAutolist(fields[6]);\n        setFavourites(fields[7]);\n      }\n      \n    };\n\n\n  },[]);\n\n  return (        \n    <main className='container top1'>\n        \n        <div className='row'>\n              <Link to={'/stock-category/'+category+'/'+subcategory} className='col-12'><i class=\"fas fa-caret-left\"></i></Link>              \n        </div>\n        \n        <div className='row top1'> \n            <div className='col-12 green'><b> {item} </b><span className='lightgrey'> |settings</span>           \n            </div>            \n        </div>\n         \n        <form className='row' id='form_ItemSettings'>\n            {index==1 &&\n            <label className='col-12 top1 grey'>Item Name\n                <input className='col-12' name='item' id='item' value={newItemName}  onChange={()=>{\n                    setNewItemNamef();    \n                }}></input>\n            </label>  }\n\n               {index==2 && <label className='col-12 top1 grey '>Minimum quantity allowed\n                    <div  className='col-12 top1 ' id='minimum'><b>{minimum}</b></div>\n                    <input type='text' className='hidden' name='minimum' value={minimum} ></input>\n                    <div className='top1'>\n                        <button type='button' className='btn  button-secondary2' onClick={()=>{setMinimumf(-5)}}>-5</button>\n                        <button type='button' className='btn  button-secondary2 left1'  onClick={()=>{setMinimumf(-1)}}>-1</button>                        \n                        <button type='button' className='btn  button-secondary left1'  onClick={()=>{setMinimumf(1)}}>+1</button>\n                        <button type='button' className='btn  button-secondary left1'  onClick={()=>{setMinimumf(5)}}>+5</button>\n                    </div>    \n                </label>}\n\n\n                {\n                  index==3 &&\n                  <label className='col-12 top1 grey'>Duration (days)\n                  <div  className='col-12 field_ItemNew top1' id='duration'><b>{duration}</b></div>\n                  <input type='text' className='hidden' name='duration' value={duration}></input>\n                  <div className='top1'>\n                      <button type='button' className='btn  button-secondary2' onClick={()=>{setDurationf(-5)}}>-5</button>\n                      <button type='button' className='btn  button-secondary2 left1'  onClick={()=>{setDurationf(-1)}}>-1</button>                        \n                      <button type='button' className='btn  button-secondary left1'  onClick={()=>{setDurationf(1)}}>+1</button>\n                      <button type='button' className='btn  button-secondary left1'  onClick={()=>{setDurationf(5)}}>+5</button>\n                      <button type='button' className='btn  button-secondary left1'  onClick={()=>{setDurationf('No expiration')}}><i class=\"fas fa-infinity\"></i></button>\n                  </div>  \n                  </label>\n                }\n\n                {(index==4 && notifications=='on') &&\n                  <label className='col-12 grey top1'>Notifications  {notifications}\n                     <input type='text' className='hidden' name='notifications' value={notifications}></input>\n                    <div  className='col-12 top1' id='notifications'><b>{notifications}</b></div>                \n                    <div class=\"form-check form-switch\">\n                        <input class=\"form-check-input\" type=\"checkbox\" id='checkbox-notifications' checked onChange={()=>{setNotificationsf()}} />                        \n                    </div>\n                </label>  \n                }\n\n                {(index==4 && notifications=='off') &&\n                  <label className='col-12 grey top1'>Notifications  {notifications}\n                     <input type='text' className='hidden' name='notifications' value={notifications}></input>\n                    <div  className='col-12 top1' id='notifications'><b>{notifications}</b></div>                \n                    <div class=\"form-check form-switch\">\n                        <input class=\"form-check-input\" type=\"checkbox\" id='checkbox-notifications'  onChange={()=>{setNotificationsf()}} />                        \n                    </div>\n                </label>  \n                }   \n\n                {(index==5 && autolist=='on') &&\n                \n                  <label className='col-11 grey top1'>Auto add to shopping-list\n                  <input type='text' className='hidden' name='autolist' value={autolist}></input>\n                      <div  className='col-12 top1' id='autolist'><b>{autolist}</b></div>                \n                      <div class=\"form-check form-switch\">\n                          <input class=\"form-check-input\" type=\"checkbox\" id='checkbox-autolist' checked  onChange={()=>{setAutolistf()}} />                        \n                      </div>\n                  </label> \n                \n                }\n\n                {(index==5 && autolist=='off') &&\n                \n                <label className='col-11 grey top1'>Auto add to shopping-list\n                <input type='text' className='hidden' name='autolist' value={autolist}></input>\n                    <div  className='col-12 top1' id='autolist'><b>{autolist}</b></div>                \n                    <div class=\"form-check form-switch\">\n                        <input class=\"form-check-input\" type=\"checkbox\" id='checkbox-autolist'   onChange={()=>{setAutolistf()}} />                        \n                    </div>\n                </label> \n              \n                }\n\n                {\n                  (index==6 && favourites=='on') &&\n                  <label className='col-11 grey top1'>Add to favourites\n                  <input type='text' className='hidden' name='favourites' value={favourites}></input>\n                      <div  className='col-12 top1' id='favourites'><b>{favourites}</b></div>                \n                      <div class=\"form-check form-switch\">\n                          <input class=\"form-check-input\" type=\"checkbox\" id='checkbox-favourites' checked onChange={()=>{setFavouritesf()}} />                        \n                      </div>\n                  </label>  \n                }\n\n                {\n                  (index==6 && favourites=='off') &&\n                  <label className='col-11 grey top1'>Add to favourites\n                  <input type='text' className='hidden' name='favourites' value={favourites}></input>\n                      <div  className='col-12 top1' id='favourites'><b>{favourites}</b></div>                \n                      <div class=\"form-check form-switch\">\n                          <input class=\"form-check-input\" type=\"checkbox\" id='checkbox-favourites'  onChange={()=>{setFavouritesf()}} />                        \n                      </div>\n                  </label>  \n                }\n\n\n                {   (newItemName==item) &&\n                    <button className='left col-1 top1 green fas fa-undo-alt invisible' type='button'></button>\n                }\n                {   (newItemName!=item && index==1) &&\n                    <button className='left col-1 top1 green fas fa-undo-alt' type='button' onClick={()=>{\n                        setNewItemName(item)\n                        document.getElementById('item').value=item;\n                        }}></button>\n                }\n\n        </form>\n\n        <div className='row top1'>\n            { index>1 && <button className='col-1' onClick={()=>setIndexf(-1)}><i class=\"fas fa-angle-left\"></i></button>}\n            { index==1 && <button className='col-1 invisible'></button>}\n            { (newItemName!='' && index<6) &&  <button className='col-1 left2' onClick={()=>setIndexf(1)}><i class=\"fas fa-angle-right\"></i></button>}            \n        </div>\n\n        <div className='row top2'>\n            <button className='col-6 col-lg-2 btn btn-primary' onClick={()=>{\n              submitForm();\n            }}>Save</button>\n        </div>\n\n    </main>            \n  );\n}\n\nexport default ItemSettings;\n"]},"metadata":{},"sourceType":"module"}